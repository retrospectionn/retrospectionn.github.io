<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FamilyVault ‚Äî Setup Guide</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root{--bg:#0f0e0c;--s1:#1a1917;--s2:#242220;--border:#3a3632;--gold:#c9a96e;--cream:#f0e8d8;--cream-d:#a89878;--green:#5aaa7a;--red:#d95f5f;--blue:#5a8aaa;--font-d:'Playfair Display',serif;--font-b:'DM Sans',sans-serif}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--cream);font-family:var(--font-b);font-size:14px;line-height:1.7;padding:0}
.container{max-width:820px;margin:0 auto;padding:48px 24px}
h1{font-family:var(--font-d);font-size:40px;color:var(--gold);margin-bottom:6px}
.tagline{color:var(--cream-d);font-size:16px;margin-bottom:48px}
h2{font-family:var(--font-d);font-size:26px;margin-bottom:6px;margin-top:48px;color:var(--cream)}
h3{font-size:15px;font-weight:600;color:var(--gold);margin-bottom:8px;margin-top:24px}
p{color:var(--cream-d);margin-bottom:12px}
.phase{background:var(--s1);border:1px solid var(--border);border-radius:14px;padding:28px;margin-bottom:24px}
.phase-header{display:flex;align-items:center;gap:14px;margin-bottom:20px}
.phase-num{width:40px;height:40px;border-radius:50%;background:var(--gold);color:#0f0e0c;font-weight:700;font-size:18px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.phase-title{font-family:var(--font-d);font-size:20px}
.step{display:flex;gap:12px;padding:12px 0;border-bottom:1px solid var(--border)}
.step:last-child{border-bottom:none;padding-bottom:0}
.step-num{min-width:24px;height:24px;border-radius:50%;background:rgba(201,169,110,.15);color:var(--gold);font-size:11px;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px}
.step-body{flex:1}
.step-body strong{color:var(--cream)}
code{background:var(--s2);border:1px solid var(--border);border-radius:5px;padding:2px 8px;font-family:monospace;font-size:12px;color:var(--gold)}
.code-block{background:var(--s2);border:1px solid var(--border);border-radius:10px;padding:16px;font-family:monospace;font-size:12px;color:var(--gold);margin:12px 0;word-break:break-all;position:relative}
.tip{background:rgba(90,170,122,.08);border:1px solid rgba(90,170,122,.2);border-radius:8px;padding:12px 14px;margin:12px 0;font-size:13px;color:var(--green)}
.warn{background:rgba(217,95,95,.08);border:1px solid rgba(217,95,95,.2);border-radius:8px;padding:12px 14px;margin:12px 0;font-size:13px;color:var(--red)}
.file-table{width:100%;border-collapse:collapse;margin:16px 0}
.file-table th{text-align:left;font-size:11px;letter-spacing:1px;text-transform:uppercase;color:var(--cream-d);padding:8px 12px;border-bottom:1px solid var(--border)}
.file-table td{padding:10px 12px;border-bottom:1px solid var(--border);font-size:13px}
.file-table td:first-child{font-family:monospace;color:var(--gold)}
.file-table td:last-child{color:var(--cream-d)}
.badge{display:inline-flex;padding:2px 8px;border-radius:99px;font-size:10px;font-weight:700}
.badge-gold{background:rgba(201,169,110,.15);color:var(--gold)}
.badge-green{background:rgba(90,170,122,.15);color:var(--green)}
.footer{margin-top:60px;padding-top:24px;border-top:1px solid var(--border);color:var(--cream-d);font-size:12px;text-align:center}
a{color:var(--gold);text-decoration:none}
a:hover{text-decoration:underline}
.arch{display:grid;grid-template-columns:1fr auto 1fr auto 1fr;gap:0;align-items:center;background:var(--s2);border-radius:10px;padding:20px;margin:16px 0;text-align:center}
.arch-box{background:var(--s1);border:1px solid var(--border);border-radius:8px;padding:12px;font-size:12px}
.arch-box .icon{font-size:24px;margin-bottom:6px}
.arch-box .name{font-weight:600;color:var(--cream)}
.arch-box .desc{font-size:10px;color:var(--cream-d)}
.arch-arrow{color:var(--gold);font-size:20px;padding:0 10px}
.faq{border-top:1px solid var(--border);padding:16px 0}
.faq:first-child{border-top:none;padding-top:0}
.faq-q{font-weight:600;color:var(--cream);margin-bottom:6px}
.faq-a{font-size:13px;color:var(--cream-d)}
</style>
</head>
<body>
<div class="container">

<h1>üè¶ FamilyVault</h1>
<p class="tagline">Shared Household Budget ‚Äî Complete Setup Guide</p>

<!-- FILES -->
<div class="phase">
  <div class="phase-header">
    <div class="phase-num">üìÅ</div>
    <div class="phase-title">What's in Your Download</div>
  </div>
  <table class="file-table">
    <tr><th>File</th><th>Purpose</th><th>Required?</th></tr>
    <tr><td>index.html</td><td>The main PWA app ‚Äî open this in a browser or host it</td><td><span class="badge badge-gold">Required</span></td></tr>
    <tr><td>sw.js</td><td>Service worker for offline support</td><td><span class="badge badge-gold">Required</span></td></tr>
    <tr><td>manifest.json</td><td>Makes the app installable on Android</td><td><span class="badge badge-gold">Required</span></td></tr>
    <tr><td>Code.gs</td><td>Google Apps Script backend (paste into Apps Script)</td><td><span class="badge badge-green">For Sync</span></td></tr>
    <tr><td>SETUP.html</td><td>This guide</td><td>‚Äî</td></tr>
  </table>
  <div class="tip">üí° All three app files (index.html, sw.js, manifest.json) must be in the <strong>same folder</strong> for the PWA to work correctly.</div>
</div>

<!-- ARCHITECTURE -->
<h2>How It Works</h2>
<div class="arch">
  <div class="arch-box"><div class="icon">üì±</div><div class="name">FamilyVault App</div><div class="desc">PWA on each family device</div></div>
  <div class="arch-arrow">‚ü∑</div>
  <div class="arch-box"><div class="icon">‚öôÔ∏è</div><div class="name">Apps Script</div><div class="desc">Free Google backend API</div></div>
  <div class="arch-arrow">‚ü∑</div>
  <div class="arch-box"><div class="icon">üìä</div><div class="name">Google Sheet</div><div class="desc">Your shared database</div></div>
</div>
<p>Each family member opens the app on their phone. When they add an expense, it goes through Apps Script and writes directly to your Google Sheet. Everyone else's app syncs the change next time they open it or hit Sync.</p>

<!-- PHASE 1 -->
<h2>Phase 1 ‚Äî Google Sheets Setup</h2>
<div class="phase">
  <div class="phase-header">
    <div class="phase-num">1</div>
    <div class="phase-title">Create Your Google Sheet</div>
  </div>
  <div class="step"><div class="step-num">1</div><div class="step-body">Go to <a href="https://sheets.google.com" target="_blank">sheets.google.com</a> and click <strong>+ Blank spreadsheet</strong>.</div></div>
  <div class="step"><div class="step-num">2</div><div class="step-body">Name it <strong>"FamilyVault Budget"</strong> by clicking "Untitled spreadsheet" at the top.</div></div>
  <div class="step"><div class="step-num">3</div><div class="step-body">Note the spreadsheet ID from the URL ‚Äî the long string between <code>/d/</code> and <code>/edit</code>. You don't need to enter this anywhere; Apps Script finds it automatically.</div></div>
  <div class="tip">üí° The script creates all the sheet tabs (Transactions, Members, Categories, Settings) automatically on first run.</div>
</div>

<!-- PHASE 2 -->
<div class="phase">
  <div class="phase-header">
    <div class="phase-num">2</div>
    <div class="phase-title">Deploy the Apps Script Backend</div>
  </div>
  <div class="step"><div class="step-num">1</div><div class="step-body">In your Google Sheet, click <strong>Extensions ‚Üí Apps Script</strong> in the top menu.</div></div>
  <div class="step"><div class="step-num">2</div><div class="step-body">A new tab opens with a code editor. <strong>Select all the placeholder code</strong> and delete it.</div></div>
  <div class="step"><div class="step-num">3</div><div class="step-body">Open the <code>Code.gs</code> file from your download in any text editor. <strong>Select All ‚Üí Copy</strong> all the code.</div></div>
  <div class="step"><div class="step-num">4</div><div class="step-body">Paste it into the Apps Script editor. Click the <strong>üíæ Save</strong> button (or press Ctrl+S / Cmd+S).</div></div>
  <div class="step"><div class="step-num">5</div><div class="step-body">Click <strong>Deploy ‚Üí New Deployment</strong> in the top-right corner.</div></div>
  <div class="step"><div class="step-num">6</div><div class="step-body">In the dialog, click the gear ‚öôÔ∏è next to "Type" and select <strong>Web app</strong>.</div></div>
  <div class="step"><div class="step-num">7</div><div class="step-body">Set these options exactly:
    <ul style="margin:8px 0 0 16px;color:var(--cream-d);">
      <li><strong style="color:var(--cream);">Execute as:</strong> Me (your Google account)</li>
      <li><strong style="color:var(--cream);">Who has access:</strong> Anyone</li>
    </ul>
  </div></div>
  <div class="step"><div class="step-num">8</div><div class="step-body">Click <strong>Deploy</strong>. Google may ask you to authorize ‚Äî click through the permission dialogs (click "Advanced" ‚Üí "Go to FamilyVault (unsafe)" ‚Üí Allow).</div></div>
  <div class="step"><div class="step-num">9</div><div class="step-body"><strong>Copy the Web app URL.</strong> It looks like:<div class="code-block">https://script.google.com/macros/s/AKfycb.../exec</div>This is your API URL. Keep it safe ‚Äî anyone with it can write to your sheet.</div></div>
  <div class="warn">‚ö†Ô∏è Every time you edit Code.gs, you must create a <strong>New Deployment</strong> (not update existing). The URL stays the same after the first deployment.</div>
</div>

<!-- PHASE 3 -->
<h2>Phase 2 ‚Äî App Setup</h2>
<div class="phase">
  <div class="phase-header">
    <div class="phase-num">3</div>
    <div class="phase-title">Host & Open the App</div>
  </div>

  <h3>Option A ‚Äî GitHub Pages (Free, Recommended)</h3>
  <div class="step"><div class="step-num">1</div><div class="step-body">Go to <a href="https://github.com" target="_blank">github.com</a> and create a free account if you don't have one.</div></div>
  <div class="step"><div class="step-num">2</div><div class="step-body">Click <strong>+ New Repository</strong>. Name it <code>familyvault</code>. Set it to <strong>Public</strong>. Click Create.</div></div>
  <div class="step"><div class="step-num">3</div><div class="step-body">Drag and drop all three files (<code>index.html</code>, <code>sw.js</code>, <code>manifest.json</code>) into the repository.</div></div>
  <div class="step"><div class="step-num">4</div><div class="step-body">Go to <strong>Settings ‚Üí Pages</strong>. Under "Source", select <strong>Deploy from branch ‚Üí main ‚Üí / (root)</strong>. Click Save.</div></div>
  <div class="step"><div class="step-num">5</div><div class="step-body">In ~2 minutes, your app is live at:<div class="code-block">https://YOUR-GITHUB-USERNAME.github.io/familyvault/</div></div></div>
  <div class="tip">‚úÖ This URL works on every family member's phone and can be installed as an app.</div>

  <h3 style="margin-top:20px;">Option B ‚Äî Open Locally (Simple, No Hosting)</h3>
  <p style="color:var(--cream-d);">For offline-only use, simply open <code>index.html</code> in Chrome on each device. Note: PWA installation and offline sync won't work without a proper web server.</p>

  <h3>Option C ‚Äî WhatsApp the Link</h3>
  <p style="color:var(--cream-d);">Once hosted on GitHub Pages, share the link with all family members. They can open it in Chrome and install it.</p>
</div>

<!-- PHASE 4 -->
<div class="phase">
  <div class="phase-header">
    <div class="phase-num">4</div>
    <div class="phase-title">First Launch ‚Äî Connect to Google Sheets</div>
  </div>
  <div class="step"><div class="step-num">1</div><div class="step-body">Open the app URL in Chrome on your Android phone.</div></div>
  <div class="step"><div class="step-num">2</div><div class="step-body">The setup wizard appears. Click <strong>"Set Up With Google Sheets"</strong>.</div></div>
  <div class="step"><div class="step-num">3</div><div class="step-body">Follow the on-screen steps and paste your <strong>Apps Script Web App URL</strong> when prompted.</div></div>
  <div class="step"><div class="step-num">4</div><div class="step-body">Enter your name and an optional PIN. Click <strong>Connect & Start</strong>.</div></div>
  <div class="step"><div class="step-num">5</div><div class="step-body">The app loads, connects to your sheet, and creates all the required tabs automatically.</div></div>
</div>

<!-- PHASE 5 -->
<h2>Phase 3 ‚Äî Install on Android</h2>
<div class="phase">
  <div class="phase-header">
    <div class="phase-num">5</div>
    <div class="phase-title">Install as Android App (PWA)</div>
  </div>
  <div class="step"><div class="step-num">1</div><div class="step-body">Open the app in <strong>Google Chrome</strong> on Android (not Samsung Browser or Firefox).</div></div>
  <div class="step"><div class="step-num">2</div><div class="step-body">Tap the <strong>three dots ‚ãÆ</strong> menu in the top-right corner of Chrome.</div></div>
  <div class="step"><div class="step-num">3</div><div class="step-body">Tap <strong>"Add to Home screen"</strong> (or "Install app" if prompted with a banner).</div></div>
  <div class="step"><div class="step-num">4</div><div class="step-body">Confirm by tapping <strong>Add</strong>. The FamilyVault icon appears on your home screen.</div></div>
  <div class="step"><div class="step-num">5</div><div class="step-body">From now on, open it from the home screen icon ‚Äî it runs like a native app, full screen, no browser bar.</div></div>
  <div class="tip">üì± Each family member does Steps 1‚Äì4 on their own phone. They all point to the same Google Sheet, so everyone sees the same data.</div>
</div>

<!-- PHASE 6 -->
<div class="phase">
  <div class="phase-header">
    <div class="phase-num">6</div>
    <div class="phase-title">Add Other Family Members</div>
  </div>
  <div class="step"><div class="step-num">1</div><div class="step-body">As admin, open the app and go to <strong>Members ‚Üí Add Member</strong>.</div></div>
  <div class="step"><div class="step-num">2</div><div class="step-body">Add each family member with their name, role, and whether they're an admin.</div></div>
  <div class="step"><div class="step-num">3</div><div class="step-body">Share the app link with each member. When they open it on their phone, they go through the setup wizard and enter the same Apps Script URL.</div></div>
  <div class="step"><div class="step-num">4</div><div class="step-body">Each member selects their name when adding transactions so the app tracks who spent what.</div></div>
  <div class="tip">üîê Admin members can add/edit/delete other members and categories. Viewers can only add transactions.</div>
</div>

<!-- FEATURES -->
<h2>Feature Guide</h2>

<div class="phase">
  <div class="phase-header"><div class="phase-num">üìä</div><div class="phase-title">Dashboard</div></div>
  <p>Live overview of income, spending, remaining budget, and net balance for the active month. Includes a category breakdown chart, member contribution bars, and recent transactions.</p>
</div>

<div class="phase">
  <div class="phase-header"><div class="phase-num">üí≥</div><div class="phase-title">Transactions</div></div>
  <p>Full transaction list with filter by type (income/expense) and category. Tap any transaction to edit it, change its category, amount, or delete it.</p>
</div>

<div class="phase">
  <div class="phase-header"><div class="phase-num">üéØ</div><div class="phase-title">Budgets</div></div>
  <p>Set monthly spending limits for each category. Add custom categories with your own emoji and color. Delete categories you don't need. The Reset button wipes all transactions for the active month ‚Äî use with caution.</p>
</div>

<div class="phase">
  <div class="phase-header"><div class="phase-num">üë•</div><div class="phase-title">Members (up to 7)</div></div>
  <p>Add, edit, or remove household members. Each member has a role, color, admin/viewer status, and optional PIN. The Members page shows each person's income, expenses, and net contribution for the active period.</p>
</div>

<div class="phase">
  <div class="phase-header"><div class="phase-num">üì•</div><div class="phase-title">Import / Export</div></div>
  <p><strong>Import:</strong> Drag or select a CSV file with columns: <code>date, desc, amount, type, category</code>. Preview before importing. Supports any standard bank export (you may need to rename columns).</p>
  <p><strong>Export:</strong> Download transactions, members, or categories as CSV for use in Excel or Google Sheets directly.</p>
  <p><strong>Months:</strong> Switch between budget periods (months), add future months, or switch back to view past data.</p>
</div>

<div class="phase">
  <div class="phase-header"><div class="phase-num">üì∑</div><div class="phase-title">QR Share</div></div>
  <p>Generate a QR code for any expense ‚Äî another family member scans it (or pastes the code) to instantly add the same expense on their device, saving data entry. Useful for shared purchases where both people need the record.</p>
</div>

<!-- CSV FORMAT -->
<h2>CSV Import Format</h2>
<div class="phase">
  <p>Your CSV must have a header row. Column names (case-insensitive):</p>
  <table class="file-table">
    <tr><th>Column</th><th>Required?</th><th>Example</th></tr>
    <tr><td>date</td><td><span class="badge badge-gold">Required</span></td><td>2025-03-15</td></tr>
    <tr><td>desc</td><td><span class="badge badge-gold">Required</span></td><td>Monthly electricity</td></tr>
    <tr><td>amount</td><td><span class="badge badge-gold">Required</span></td><td>12000</td></tr>
    <tr><td>type</td><td>Optional</td><td>expense or income</td></tr>
    <tr><td>category</td><td>Optional</td><td>util (must match category ID)</td></tr>
    <tr><td>notes</td><td>Optional</td><td>Paid via bank transfer</td></tr>
  </table>
  <div class="code-block">date,desc,amount,type,category,notes
2025-03-01,House Rent,75000,expense,house,Monthly rent
2025-03-01,Salary,180000,income,,Ahmed's salary
2025-03-05,School Fees,28000,expense,edu,Term 2</div>
</div>

<!-- FAQ -->
<h2>FAQs</h2>
<div class="phase">
  <div class="faq">
    <div class="faq-q">What happens if I'm offline?</div>
    <div class="faq-a">The app works offline. Any transactions added offline are saved locally. When you come back online and tap "Sync", they're pushed to Google Sheets.</div>
  </div>
  <div class="faq">
    <div class="faq-q">Is my data safe?</div>
    <div class="faq-a">Your data lives in your own Google Sheet, which only you and people you share it with can access. The Apps Script URL is the only "key" to it ‚Äî don't share it publicly. Consider setting a PIN for members in the app.</div>
  </div>
  <div class="faq">
    <div class="faq-q">How do I update the app?</div>
    <div class="faq-a">Replace the files on GitHub Pages with the new versions. Installed PWAs on family members' phones update automatically within 24 hours (or force-refresh by closing and reopening).</div>
  </div>
  <div class="faq">
    <div class="faq-q">Can multiple people add expenses at the same time?</div>
    <div class="faq-a">Yes. Google Sheets handles concurrent writes. Each person's transaction is appended as a new row, so there are no conflicts.</div>
  </div>
  <div class="faq">
    <div class="faq-q">The sync says "failed" ‚Äî what do I do?</div>
    <div class="faq-a">Check that: (1) Your Apps Script URL is correct in Settings. (2) You have internet connection. (3) The script is deployed as "Anyone" access. If you updated Code.gs, make sure you created a New Deployment.</div>
  </div>
  <div class="faq">
    <div class="faq-q">Can I use this on iPhone?</div>
    <div class="faq-a">Yes, open in Safari on iPhone. Tap Share ‚Üí Add to Home Screen. The app works fully but offline caching may be limited on older iOS versions.</div>
  </div>
</div>

<div class="footer">
  <p>FamilyVault v2.0 &nbsp;¬∑&nbsp; Built for shared household budgeting &nbsp;¬∑&nbsp; Powered by Google Sheets + Apps Script</p>
  <p style="margin-top:6px;">Data stays in your Google account. No third-party servers involved.</p>
</div>

</div>
</body>
</html>
